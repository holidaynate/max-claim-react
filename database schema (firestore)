claims/
  {claimId}/
    - id: "MC-102"
    - userId: "user_abc123"
    - propertyAddress: "123 Main St, Austin TX"
    - ownerName: "John Smith"
    - damageDescription: "Roof wind damage..."
    - status: "awaiting_docs" | "submitted" | "in_review" | "approved" | "rejected"
    - claimValue: 7100
    - materialCost: 5850
    - overheadProfit: 1250
    - region: "Travis County, TX"
    - createdAt: timestamp
    - updatedAt: timestamp
    - submittedToCarrier: boolean
    - carrierName: "Liberty Mutual"
    
    documents/
      {docId}/
        - type: "photo" | "invoice" | "pdf"
        - url: "gs://maxclaim-storage/claims/MC-102/photo1.jpg"
        - caption: "Damaged roof shingles"
        - uploadedAt: timestamp
        - ocrData: { text, confidence, labels }

users/
  {userId}/
    - email: "contractor@example.com"
    - name: "Royal RC Inc"
    - role: "contractor" | "adjuster" | "admin"
    - connectedServices: {
        github: { connected: false },
        dropbox: { connected: true, token: "encrypted" },
        plaid: { connected: false }
      }
    - subscription: "free" | "pro" | "enterprise"
    - createdAt: timestamp

metrics/
  {userId}/
    - revenueRecovered: 128500
    - successRate: 82
    - activeClaims: 6
    - averageClaimValue: 21400
    - claimsThisMonth: 12
    - updatedAt: timestamp

pricing/
  regions/
    {regionId}/
      - name: "Travis County, TX"
      - wasteFactors: { roofing: 0.12, drywall: 0.15 }
      - overheadPercent: 15
      - profitPercent: 10
      - xactimateCompatible: true

notifications/
  {userId}/
    {notificationId}/
      - message: "Claim #MC-102 requires documentation"
      - type: "action_required" | "info" | "success"
      - read: false
      - createdAt: timestamp
üîê SECURITY IMPLEMENTATION
Firestore Security Rules:
// firestore.rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Users can only access their own data
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Claims: users can only access their own claims
    match /claims/{claimId} {
      allow read: if request.auth != null && 
                     resource.data.userId == request.auth.uid;
      allow create: if request.auth != null && 
                       request.resource.data.userId == request.auth.uid;
      allow update: if request.auth != null && 
                       resource.data.userId == request.auth.uid;
      
      // Nested documents
      match /documents/{docId} {
        allow read, write: if request.auth != null && 
                              get(/databases/$(database)/documents/claims/$(claimId)).data.userId == request.auth.uid;
      }
    }
    
    // Metrics: read-only for users, write from backend only
    match /metrics/{userId} {
      allow read: if request.auth != null && request.auth.uid == userId;
      allow write: if false; // Only backend can write
    }
    
    // Pricing: read-only for all authenticated users
    match /pricing/{document=**} {
      allow read: if request.auth != null;
      allow write: if false; // Only admin via backend
    }
    
    // Notifications
    match /notifications/{userId}/{notificationId} {
      allow read, update: if request.auth != null && request.auth.uid == userId;
    }
  }
}
